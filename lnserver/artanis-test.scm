;; /gnu/store/0w76khfspfy8qmcpjya41chj3bgfcy0k-guile-3.0.4/bin/guile
;; /gnu/store/jgl9d4axpavsv83z2f1z1himnkbsxxqj-guile-2.2.7/bin/guile
;; /usr/lib/x86_64-linux-gnu/guile/3.0/bin/guile

(use-modules (srfi srfi-1)
	     (dbi dbi)
	     (ice-9 match)
	     (web uri)
	     (artanis utils)(artanis irregex)
	     (srfi srfi-19)   ;; date time
	     (ice-9 textual-ports)(ice-9 rdelim)(ice-9 pretty-print)
	     (artanis artanis)
	     (ice-9 string-fun) ;; string-replace-substring
	     (rnrs bytevectors)
	     (lnserver sys extra))

(load "./sys/extra.scm")

(define ciccio (dbi-open "postgresql" "ln_admin:welcome:lndb:tcp:192.168.1.11:5432"))

DROP TABLE IF EXISTS config CASCADE;
create table config
        (id SERIAL,
	 help_url_prefix VARCHAR(250),
	version VARCHAR(20),		 
	cust_id VARCHAR(250),
	cust_key varchar(250),
	cust_email VARCHAR(250));

INSERT INTO config(help_url_prefix, version) VALUES ('labsolns.com/software/','0.1.0-042020');


INSERT INTO config(help_url_prefix, version, cust_id, cust_key, cust_email) VALUES ('labsolns.com/software/','0.1.0-042020','16fjkhwF2rkdbwogqLdHZG4fb87jUxtJBU','c1f400d8992fbe8b1fec6c54cccf14a3', 'info@labsolns.com');

(get-key "16fjkhwF2rkdbwogqLdHZG4fb87jUxtJBU" "info@labsolns.com")

(validate-key "16fjkhwF2rkdbwogqLdHZG4fb87jUxtJBU" "info@labsolns.com" "c1f400d8992fbe8b1fec6c54cccf14a3")

(define a #f)


(eq? #t a)

ln-version


(dehtmlify (htmlify "a string of words"))




(define a "60%2520116%2520114%252062%252060%2520116%2520104%252062%252060%252097%252032%2520104%2520114%2520101%2520102%252061%252034%252047%252097%2520115%2520115%252097%2520121%2520114%2520117%2520110%252047%2520103%2520101%2520116%2520105%2520100%252063%2520105%2520100%252061%252049%252034%252062%252065%252082%252045%252049%252060%252047%252097%252062%252060%252047%2520116%2520104%252062%252060%2520116%2520104%252062%252097%2520115%2520115%252097%2520121%252095%2520114%2520117%2520110%252049%252060%252047%2520116%2520104%252062%252060%2520116%2520104%252062%252080%252083%252045%252049%252032%252076%252089%252084%252045%252049%252059%252057%252054%252059%252052%2520105%2520110%252049%252050%252060%252047%2520116%2520104%252062%252060%2520116%2520104%252062%252069%252076%252073%252083%252065%252060%252047%2520116%2520104%252062%252060%2520116%2520104%252062%252076%252089%252084%252045%252049%252060%252047%2520116%2520104%252062%252060%2520116%2520104%252062%252052%252032%252099%2520111%2520110%2520116%2520114%2520111%2520108%2520115%252032%252099%2520111%2520108%252032%252049%252050%252060%252047%2520116%2520104%252062%252060%2520116%2520114%252062")

(define a "60%2B116%2B114%2B62%2B60%2B116%2B104%2B62%2B60%2B97%2B32%2B104%2B114%2B101%2B102%2B61%2B34%2B47%2B97%2B115%2B115%2B97%2B121%2B114%2B117%2B110%2B47%2B103%2B101%2B116%2B105%2B100%2B63%2B105%2B100%2B61%2B49%2B34%2B62%2B65%2B82%2B45%2B49%2B60%2B47%2B97%2B62%2B60%2B47%2B116%2B104%2B62%2B60%2B116%2B104%2B62%2B97%2B115%2B115%2B97%2B121%2B95%2B114%2B117%2B110%2B49%2B60%2B47%2B116%2B104%2B62%2B60%2B116%2B104%2B62%2B80%2B83%2B45%2B49%2B32%2B76%2B89%2B84%2B45%2B49%2B59%2B57%2B54%2B59%2B52%2B105%2B110%2B49%2B50%2B60%2B47%2B116%2B104%2B62%2B60%2B116%2B104%2B62%2B69%2B76%2B73%2B83%2B65%2B60%2B47%2B116%2B104%2B62%2B60%2B116%2B104%2B62%2B76%2B89%2B84%2B45%2B49%2B60%2B47%2B116%2B104%2B62%2B60%2B116%2B104%2B62%2B52%2B32%2B99%2B111%2B110%2B116%2B114%2B111%2B108%2B115%2B32%2B99%2B111%2B108%2B32%2B49%2B50%2B60%2B47%2B116%2B104%2B62%2B60%2B116%2B114%2B62")


(utf8->string (u8-list->bytevector (map string->number (string-split (uri-decode a) #\+))))

(stripfix "")
